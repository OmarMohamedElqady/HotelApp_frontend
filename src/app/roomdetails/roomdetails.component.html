<div *ngIf="isLoading" class="loading-container">
    <span class="loading">Loading...</span>
</div>

<div  *ngIf="!isLoading" class="details-container">
    <p *ngIf="message" class="success-message">{{message}}</p>
    <p *ngIf="error" class="error-message">{{error}}</p>

    <h2 class="room-title">Room Details</h2>
    <img [src]="room?.imageUrl" [alt]="room?.type" class="room-image" />

    <div class="details-info">
        <h3>{{room?.type}}</h3>
        <p><strong>Room Number: </strong>{{ room?.roomNumber }}</p>
        <p><strong>Capacity: </strong>{{room?.capacity}}</p>
        <p><strong>Price: </strong>{{room?.pricePerNight}} / night</p>
        <p>{{room?.description}}</p>
    </div>

    <div class="booking-info">
        <button class="book-now-button" (click)="showDatePicker = true">
            Select Dates
        </button>

        <div *ngIf="showDatePicker" class="date-picker-container">
            <div class="date-picker">
                <label>Choose Check-in Date</label>
                <input type="date" [min]="minDate" [(ngModel)]="checkInDate">
            </div>
            
            <div class="date-picker">
                <label>Choose Check-Out Date</label>
                <input type="date" [min]="checkInDate" [(ngModel)]="checkOutDate">
            </div>

            <button (click)="handleConfirmation()" class="proceed-button" >Proceed</button>
        </div>

        <div class="preview-container" *ngIf="showBookingPreview">
            <h3>Booking Preview</h3>
            <p><strong>Check-in Date:</strong>{{checkInDate | date: 'yyyy-MM-dd'}}</p>
            <p><strong>Check-out Date:</strong>{{checkOutDate | date: 'yyyy-MM-dd'}}</p>
            <p><strong>Total Days To Stay:</strong>{{totalDaysToStay}}</p>
            <button (click)="acceptBooking()" class="confirm-booking-button">Confirm and Book</button>
            <button (click)="cancelBookingPreview()" class="cancel-button">Cancel</button>
        </div>

    </div>


</div>


